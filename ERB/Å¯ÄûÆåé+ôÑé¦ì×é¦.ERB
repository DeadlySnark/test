;==================================================
;性交中の部屋(場所)に踏み込んだ場合の口上
;COMF400にて使用
;TRYCALLFORM NTR_INFIDELITY(LOCAL)
;==================================================
@NTR_INFIDELITY(LOCAL)
;覗きバレしてる
;PRINTFORML 回数:{CFLAG:LOCAL:覗き発覚回数}  行為:{CFLAG:LOCAL:覗き発覚時行為}
IF CFLAG:LOCAL:覗き発覚回数 > 0 && CFLAG:LOCAL:覗き発覚時行為 >= 7
	PRINTFORML 【%GETPLACENAME(FLAG:21)%】に入ると先程見ていた通り%CALLNAME:LOCAL%が%NTR_NAME(0)%と%NTR_GET_SEX_LAGE()%でまぐわっていた
	;継続
	;IF RAND:3 == 0 || IS_AIR_MASTER(LOCAL) >= 4
		;NTR or 寝取られ寸前 or 寝取られそう
		;IF TALENT:LOCAL:NTR || NTR_CHK_FAVORABLY(LOCAL, "寝取られ寸前") || NTR_CHK_FAVORABLY(LOCAL, "寝取られそう")
		;ELSE
		;ENDIF
	;情事を止める
	;ELSE
		IF NTR_CHK_FAVORABLY(LOCAL, "寝取られ")
			IF RAND:3 == 0
				PRINTFORML %CALLNAME:LOCAL%は漸く部屋に入ってきた%CALLNAME:MASTER%を鼻で笑いながら
				PRINTFORMW 趣味が悪いと指摘して一度%NTR_NAME(0)%から離れた。
			ELSEIF RAND:2 == 0	
				PRINTFORML %CALLNAME:LOCAL%は%CALLNAME:MASTER%に気付くと驚いた表情を浮かべた。
				PRINTFORMW どうやら%CALLNAME:MASTER%が部屋の前に居る事には気づいていたが部屋に入ってくる度胸があるとは思っていなかったようだ。
			ELSE
				PRINTFORML 今更部屋に入ってきた%CALLNAME:MASTER%を無視して情事を重ねようとした%CALLNAME:LOCAL%だったが%NTR_NAME(0)%に最初から
				PRINTFORMW 目の前で見せ付ける事を提案され、はにかみながらも嬉しそうな表情を浮かべて%NTR_NAME(0)%から一旦離れた。
			ENDIF
		ELSEIF NTR_CHK_FAVORABLY(LOCAL, "寝取られ寸前")
			IF RAND:3 == 0
				PRINTFORML %CALLNAME:LOCAL%は漸く部屋に入ってきた%CALLNAME:MASTER%を鼻で笑いながら
				PRINTFORMW 趣味が悪いと指摘して一旦%NTR_NAME(0)%から離れた。
			ELSEIF RAND:2 == 0
				PRINTFORML %CALLNAME:LOCAL%は%CALLNAME:MASTER%に気付くと驚いた表情を浮かべた。
				PRINTFORMW どうやら%CALLNAME:MASTER%が部屋の前に居る事には気づいていたが部屋に入ってくる度胸があるとは思っていなかったようだ。
			ELSE
				PRINTFORML 今更部屋に入ってきた%CALLNAME:MASTER%を無視して情事を重ねようとした%CALLNAME:LOCAL%だったが%NTR_NAME(0)%に最初から
				PRINTFORMW 目の前で見せ付ける事を提案され、はにかみながらも嬉しそうな表情を浮かべて%NTR_NAME(0)%から一旦離れた。
			ENDIF
		ELSEIF NTR_CHK_FAVORABLY(LOCAL, "寝取られそう")
			;IF RAND:3 == 0
			IF TALENT:LOCAL:恋慕
				PRINTFORML %CALLNAME:LOCAL%は部屋に入ってきた%CALLNAME:MASTER%に気づくと%NTR_NAME(0)%から離れた。
				PRINTFORML 泣きそうな表情を浮かべながら、%CALLNAME:MASTER%に近づき質問を投げかけた。
				PRINTFORMW ｢状況を知っていて止めに来る様な気概があるならどうして今まで私を放置したのか｣、と…
			ELSE
				PRINTFORML %CALLNAME:LOCAL%は部屋に入ってきた%CALLNAME:MASTER%に気づいて%NTR_NAME(0)%から離れると
				PRINTFORML 諦めた様な表情を浮かべながら%CALLNAME:MASTER%に質問を投げかけてきた。
				PRINTFORMW ｢もう思わせぶりな態度を取らないで欲しい｣とつぶやいた…
			ENDIF
		ELSEIF NTR_CHK_FAVORABLY(LOCAL, "主人より高い")
			PRINTFORML %CALLNAME:MASTER%は目の前で%NTR_NAME(0)%に犯されている%CALLNAME:LOCAL%を助けた。
			IF RAND:3 == 0
				PRINTFORML %CALLNAME:LOCAL%は助けてくれた事に感謝したが
				PRINTFORML 先程から部屋の前にいた%CALLNAME:MASTER%に何度も助けを求めていたにも関わらず
				PRINTFORMW 無視された事実が不信感を抱き、重く心にのしかかっている。
			ELSEIF RAND:2 == 0
				PRINTFORML %CALLNAME:LOCAL%は助けてくれた事に感謝したが、先程から部屋の前に居て何度も助けを求めていたにも関わらず無視され
				PRINTFORMW 今更になって助けに来た%CALLNAME:MASTER%に%CALLNAME:LOCAL%は不信感を抱いている。
			ELSE
				PRINTFORMW %CALLNAME:LOCAL%は助けてくれた事に感謝したが、何故か助かった事に残念と感じている自分に気づき
				PRINTFORMW 無意識に%NTR_NAME(0)%に熱い視線を送ってしまった。
			ENDIF
		ELSE
			IF RAND:3 == 0
				PRINTFORML %CALLNAME:LOCAL%は直ぐに助けてくれなかった%CALLNAME:MASTER%に思う所はあるが、
				PRINTFORMW それでも助かったとばかりに%NTR_NAME(0)%から離れて嬉しそうな顔をしながら%CALLNAME:MASTER%の傍に近づいてきた。
			ELSEIF RAND:2 == 0
				PRINTFORM %CALLNAME:LOCAL%は助けてくれた事には感謝したが、
				IF TALENT:LOCAL:恋慕
					PRINT 恋人が
				ELSE
					PRINT 知り合いが
				ENDIF
				PRINTFORML レイプされているのを見ても直ぐ
				PRINTFORMW 助けてくれなかった事に%CALLNAME:MASTER%へ対する不信感を抱き始めた。
			ELSE
				PRINTFORML 恋人が別の男に無理矢理犯されている事に気づいていながらも、直ぐに助けに来なかった事に%CALLNAME:LOCAL%は不信感を抱いている。
			ENDIF
		ENDIF
	;ENDIF
		CFLAG:LOCAL:覗き発覚回数 = 0 
		CFLAG:LOCAL:覗き発覚時行為 = 0
		CALL NTR_RESET_VISITOR_ACTION(LOCAL)
;覗きバレしてない
ELSE
	PRINTFORML なんと、%CALLNAME:MASTER%が【%GETPLACENAME(FLAG:21)%】に入ると%CALLNAME:LOCAL%が%NTR_NAME(0)%と%NTR_GET_SEX_LAGE()%でまぐわっていた
	;継続
	IF RAND:3 == 0 || IS_AIR_MASTER(LOCAL) >= 4
		;NTR or 寝取られ寸前 or 寝取られそう
		IF TALENT:LOCAL:NTR || NTR_CHK_FAVORABLY(LOCAL, "寝取られ寸前") || NTR_CHK_FAVORABLY(LOCAL, "寝取られそう")
			PRINTFORMW 二人は%CALLNAME:MASTER%に気づいたが情事を止めず、逆に見せ付けるかの様に続行した
		ELSE
			PRINTFORML %CALLNAME:MASTER%に気づいた%CALLNAME:LOCAL%は逃れようと助けを求めたが、興奮している%NTR_NAME(0)%によって
			PRINTFORM 逃げられぬ様に
			;正常位 or 後背位
			IF FLAG:訪問者との行為 == 7 || FLAG:訪問者との行為 == 8 || FLAG:訪問者との行為 == 14 || FLAG:訪問者との行為 == 15
				PRINT 無理矢理に組み伏せられて
			;騎乗位
			ELSEIF FLAG:訪問者との行為 == 9 || FLAG:訪問者との行為 == 16
				PRINT 離れようとした腕を掴まれて下から
			;対面座位 or 背面座位
			ELSEIF FLAG:訪問者との行為 == 10 || FLAG:訪問者との行為 == 11 || FLAG:訪問者との行為 == 17 || FLAG:訪問者との行為 == 18
				PRINT 強引に腰を抱き寄せられて
			;対面立位 or 背面立位
			ELSEIF FLAG:訪問者との行為 == 12 || FLAG:訪問者との行為 == 13 || FLAG:訪問者との行為 == 19 || FLAG:訪問者との行為 == 20
				PRINT 壁に押し付けられて
			ENDIF
			PRINTFORMW 激しく腰を打ちつけられている
		ENDIF
	;情事を止める
	ELSE
		IF NTR_CHK_FAVORABLY(LOCAL, "寝取られ")
			IF RAND:2 == 0
				PRINTFORML %CALLNAME:LOCAL%は%CALLNAME:MASTER%に気付くと名残惜しそうな顔をしながら
				PRINTFORMW %NTR_NAME(0)%に一瞥し、とても残念そうに離れた。
			ELSE
				PRINTFORML 部屋に入ってきた%CALLNAME:MASTER%を無視して情事を重ねようとした%CALLNAME:LOCAL%だったが%NTR_NAME(0)%に最初から
				PRINTFORMW 目の前で見せ付ける事を提案され、はにかみながらも嬉しそうな表情を浮かべて%NTR_NAME(0)%から一旦離れた。
			ENDIF
		ELSEIF NTR_CHK_FAVORABLY(LOCAL, "寝取られ寸前")
			IF RAND:2 == 0
				PRINTFORML %CALLNAME:MASTER%に気づいて%NTR_NAME(0)%から離れようとした%CALLNAME:LOCAL%だったが
				PRINTFORML その前に%NTR_NAME(0)%がまるで%CALLNAME:MASTER%から%CALLNAME:LOCAL%を守るかの様に立ち塞がった
				PRINTFORML %CALLNAME:LOCAL%は既に自分の物だと主張したいようだ。
			ELSE
				PRINTFORML %NTR_NAME(0)%は%CALLNAME:LOCAL%を守るかの様に%CALLNAME:MASTER%との間に入り
				PRINTFORML %CALLNAME:LOCAL%は既に自分の物だと主張するかの様に立ちふさがった。
			ENDIF
		ELSEIF NTR_CHK_FAVORABLY(LOCAL, "寝取られそう")
			;IF RAND:2 == 0
				PRINTFORMW %CALLNAME:LOCAL%は部屋に入ってきた%CALLNAME:MASTER%に気付くと残念そうな顔をしながら%NTR_NAME(0)%から離れた。
			;ELSE
			;ENDIF
		ELSEIF NTR_CHK_FAVORABLY(LOCAL, "主人より高い")
			IF RAND:2 == 0
				PRINTFORML %CALLNAME:MASTER%に気づいた%CALLNAME:LOCAL%は言い逃れ出来ない状況を見られた事に青ざめている。
			ELSE
				PRINTFORML %CALLNAME:LOCAL%は%CALLNAME:MASTER%が来た事に気付くと顔を青ざめて%NTR_NAME(0)%から離れ、
				PRINTFORMW %CALLNAME:MASTER%の顔色を伺っている。
			ENDIF
		ELSE
			PRINTFORM %CALLNAME:MASTER%は目の前で犯されている恋人の%CALLNAME:LOCAL%を助けると
			IF RAND:2 == 0
				PRINTFORML %CALLNAME:LOCAL%は%NTR_NAME(0)%によって望まぬ性交を強要され、激しく腰を打ち付けられた事を告白した。
			ELSE
				PRINTFORML 助けられた%CALLNAME:LOCAL%は%CALLNAME:MASTER%に感謝を述べた。
			ENDIF
		ENDIF
		CALL NTR_RESET_VISITOR_ACTION(LOCAL)
	ENDIF
ENDIF
